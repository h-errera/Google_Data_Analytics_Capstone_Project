---
title: "Google_Data_Analytics_Capstone_Project"
author: "Alejandra Herrera"
date: '2023-12-29'
output:
  word_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

**Introduction**

In this case study I analyzed FitBit Fitness tracker data obtained from kaggle to answer some key business questions. 
This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. 
Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for 
physical activity, heart rate, and sleep monitoring.

In this study, I will focus on how consumers are using FitBits to help guide
marketing strategies for the company.

##Questions for the Analysis 

In the Ask Phase, I am trying to understand the data provided and
the problem I am trying to solve. Here are some of the questions I
am trying to answer. 

-What are some trends in fitbit usage? How could these trends help influence
marketing strategies? 
  
###Business Task
  My purpose for this data analysis is to understand how fitbit customers are using 
their devices. Through this analysis I can make informed reccomendations
for their marketing team.

**Prepare Phase**

In this phase, I will download and import the dataset. I will then
organize and ensure that the data is credible. 

Again, this public dataset was obtained from Kaggle. In addition to information
on physical activity, heart rate, and sleep monioring, the data set also includes 
information about daily activity and steps. 

```{r}
setwd("/Users/alejandraherrera/Documents/Fitabase_Data") 
```

###Loading packages 

To begin, I installed and loaded some R packages that will help me in my analysis. 

```{r}
install.packages("tidyverse")
install.packages("lubridate")
install.packages("dplyr") 
install.packages("ggplot2")
install.packages("tidyr")
install.packages("here") 
install.packages("skimr") 
install.packages("janitor") 
```

###Loading packages
```{r}
library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(here)
library(skimr)
library(janitor)
```

###Importing dataset 

Now, I have imported all the dataset. During this process, I viewed, cleaned, formatted, and organized he data.
After looking through the data, I decided that the most relevant data to work with was
dailyActivity, dailyCalories, dailyIntensities, heartrate ( in seconds ), sleepDay, and weightLogInfo. 


##Activity dataset
```{r}
Activity <- read.csv("../Fitabase_Data/dailyActivity_merged.csv")
head(Activity)
colnames(Activity)
str(Activity)
```

##Calories dataset 
```{r}

Calories <- read.csv("../Fitabase_Data/dailyCalories_merged.csv")
head(Calories)
colnames(Calories)
str(Calories)

```

##Intensities dataset
```{r}
Intensities<- read.csv("../Fitabase_Data/dailyIntensities_merged.csv")
head(Intensities)
colnames(Intensities)
str(Intensities)
```

##Heartrate dataset
```{r}
Heartrate<- read.csv("../Fitabase_Data/heartrate_seconds_merged.csv")
head(Heartrate)
colnames(Heartrate)
str(Heartrate)
```

##Sleep dataset

```{r}
Sleep <- read.csv("../Fitabase_Data/sleepDay_merged.csv")
head(Sleep)
colnames(Sleep)
str(Sleep)
```

##Weight Dataset
```{r}
Weight <- read.csv("../Fitabase_Data/weightLogInfo_merged.csv")
head(Weight)
colnames(Weight)
str(Weight)

```



**Process Phase** 

During this Phase, I will process, clean, and organize the dataset for analysis. 
One of the main issues I noticed was with the timestamp data. Thus, I converted
the date time format and split to date and time. 


##Activity 
```{r}
Activity$ActivityDate= as.POSIXct(Activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
Activity$date <- format(Activity$ActivityDate, format = "%m/%d/%y")
Activity$ActivityDate=as.Date(Activity$ActivityDate, format= "%m/%d/%Y", tz=Sys.timezone())
Activity$date=as.Date(Activity$date, format="%m/%d/%Y")
```

##Intensities
```{r}
Intensities$ActivityDay=as.Date(Intensities$ActivityDay, format="%m/%d/%Y", tz=Sys.timezone())
```

##Sleep
```{r}

Sleep$SleepDay=as.POSIXct(Sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
Sleep$date <- format(Sleep$SleepDay, format = "%m/%d/%y")
Sleep$date=as.Date(Sleep$date, "% m/% d/% y")


```

**Analyze Phase**

Now that all the data is stored appropriately, I looked at the total number of participants in each
dataset to ensure that it included a credible number to analyze and make conclusions. 


#Participants: 

```{r}
Activity %>%
  summarize(Activity_participants = n_distinct(Activity$Id))

n_distinct(Calories$Id)
n_distinct(Intensities$Id)
n_distinct(Heartrate$Id)
n_distinct(Sleep$Id)
n_distinct(Weight$Id)
```

The data indicated that there were 33 patricipants invovled with the activity, calories, and intensities
dataset. 24 participants were included in the sleep data, meanwhile on 8 were included in the weight and 14 in the heartrate dataset.
Since the heartrate and sleep dataset had a small amount of participants,
I decided to exclude them from the analysis. 

Thus, my analysis will focus on the activity, calories, intensities, and sleep datasets. 


#Activity 
```{r}
Activity %>% 
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes, Calories) %>% 
  summary()

```


##Exploring the number of active minutes per category

#Intensity
```{r}
Intensities %>%
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes) %>%
  summary()
```

#Calories
```{r}

Calories %>%
  select(Calories) %>% 
  summary()
```

#Sleep
```{r}
Sleep %>%
  select(TotalSleepRecords, TotalMinutesAsleep, TotalTimeInBed) %>% 
  summary()
```

#Weight
```{r}

Weight %>%
  select(WeightKg, Fat) %>%
  summary()
```

#**Key Findings**

  -The average sedentary time is about 16 hours.
  -Majority of participants are lightly active. 
  -Participants sleep and average of 7 hours.
  -The average total number of steps per day is about 7638. This number
is estimated to be lower than what is reccommended by the NIH ( NIH 2020 ). The NIH 
reccommends about 10,000 steps per day to reduce the risk of heart disease and cancer ( NIH 2020 ).


#Merging data

Before visualizing the data, I will merge the datasets Activity and Sleep. Since
the Activity dataset contains more participants, I will use the merge option inner_join
to include the same number of participants as the Sleep dataset. I will consider using the 
outer_join option to keep all the participants in the dataset. 

```{r}
Combined_data_inner <- merge(Sleep, Activity, by="Id")
n_distinct(Combined_data_inner$Id)

Combined_data_outer <- merge(Sleep, Activity, by="Id", all = TRUE)
n_distinct(Combined_data_outer$Id)
```

**Share and Act Phase**

#Relationship between Steps and Sedentary time 
###Whats the relationship between steps taken in a day and sedentary minutes?

```{r}
ggplot(data=Activity, aes(x=TotalSteps, y=SedentaryMinutes)) + geom_point() + geom_smooth() + labs(title="Total Steps vs. Sedentary Minutes")
```

#Relationship between minutes asleep and time in bed
###Whats the relationship between minutes asleep and time in bed?

```{r}
ggplot(data=Sleep, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + geom_point() + geom_smooth() + labs(title = "Minutes Asleep vs. Time in Bed Minutes")

```

##Relationship between steps and calories 
###relationship between steps taken and calories
```{r}
ggplot(data=Activity, aes(x=TotalSteps, y=Calories)) + geom_point() + geom_smooth() + labs(title = "Total Steps vs. Calories")
```

##Intensities over Time 

```{r}
Intensities$ActiveIntensity <- (Intensities$VeryActiveMinutes)/60

Combined_data <- merge(Weight, Intensities, by="Id", all=TRUE)
Combined_data$time <-format(Combined_data$Date, format = "%H:%M:%S")

ggplot(data=Combined_data, aes(x=time, y=ActiveIntensity)) + geom_histogram(stat = "identity", fill="darkgreen") + 
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title="Total very Active Intensity vs. Time")
```

#**Conclusions**

By analyzing the FitBit Fitness Tracker dataset, I was able to obtain useful
information that the company can consider when creating new marketing strategies. 


##Reccommendations for the marketing team

-From the data obtained, users tend to have an average sedentary time of 16 hours.
The company can encourage customers to take more steps throughout their day by sending notifications
to remind them to be active.

-Similarly, the company can notify their users when it is time to wind down and 
get ready for bed to earn a full 8 hours of sleep instead of the average time of 7 hours.

-As noted, users who take more steps per day tend to burn more calories. Thus, the company can
encourage those who set a goal to lose weight to take more steps throughout their day(
From the information obtained, it seems that their target audience are user who 
have a full time job and only have time to be active before or after work. 
)


Overall, the company needs to determine effective ways for users to be motivated to workout,
especially as they tend to have a busy work week. 


Sources: 

https://www.nih.gov/news-events/nih-research-matters/number-steps-day-more-important-step-intensity

Dataset download: 
https://www.kaggle.com/datasets/arashnic/fitbit/data
